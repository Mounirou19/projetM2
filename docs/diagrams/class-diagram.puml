@startuml Class-Diagram-CineManga@startuml Diagramme de Classes - CinéManga

!theme aws-orange

title Diagramme de Classes - CinéManga!theme aws-orange

title Diagramme de Classes - Architecture CinéManga

' === CONFIGURATION ===

skinparam classAttributeIconSize 0
skinparam packageStyle rectangle

' Entités principales
class Users {

    -id: int

' === PACKAGE ENTITÉS ===    -lastname: string

package "Entités (Doctrine ORM)" {    -firstname: string

      -email: string (unique)

  class Users {    -password: string (hashed)

    -id: int    -role: string

    -lastname: string    -status: boolean

    -firstname: string    --

    -email: string (unique)    +getId(): ?int

    -password: string    +getLastname(): ?string

    -role: string    +setLastname(string): self

    -status: bool    +getFirstname(): ?string

    --    +setFirstname(string): self

    +getId(): ?int    +getEmail(): ?string

    +getLastname(): ?string    +setEmail(string): self

    +setLastname(string): self    +getPassword(): ?string

    +getFirstname(): ?string    +setPassword(string): self

    +setFirstname(string): self    +getRole(): ?string

    +getEmail(): ?string    +setRole(string): self

    +setEmail(string): self    +isStatus(): ?boolean

    +getPassword(): ?string    +setStatus(boolean): self

    +setPassword(string): self    --

    +getRole(): ?string    +getRoles(): array

    +setRole(string): self    +getUserIdentifier(): string

    +isStatus(): ?bool    +eraseCredentials(): void

    +setStatus(bool): self}

    +getRoles(): array

    +getUserIdentifier(): stringclass Medias {

    +eraseCredentials(): void    -id: int

  }    -title: string

      -type: string

  class Medias {    -imageUrl: string

    -id: int    -description: text

    -title: string    -status: boolean

    -type: string    -score: int

    -imageUrl: ?string    --

    -description: ?string    +getId(): ?int

    -status: bool    +getTitle(): ?string

    -score: ?int    +setTitle(string): self

    --    +getType(): ?string

    +getId(): ?int    +setType(string): self

    +getTitle(): ?string    +getImageUrl(): ?string

    +setTitle(string): self    +setImageUrl(string): self

    +getType(): ?string    +getDescription(): ?string

    +setType(string): self    +setDescription(string): self

    +getImageUrl(): ?string    +isStatus(): ?boolean

    +setImageUrl(string): self    +setStatus(boolean): self

    +getDescription(): ?string    +getScore(): ?int

    +setDescription(?string): self    +setScore(int): self

    +isStatus(): ?bool}

    +setStatus(bool): self

    +getScore(): ?intclass Profils {

    +setScore(?int): self    -id: int

  }    -id_user: int

      -id_media: int

  class Profils {    --

    -id: int    +getId(): ?int

    -id_user: int    +getIdUser(): ?int

    -id_media: int    +setIdUser(int): self

    --    +getIdMedia(): ?int

    +getId(): ?int    +setIdMedia(int): self

    +getIdUser(): ?int}

    +setIdUser(int): self

    +getIdMedia(): ?intclass Contacts {

    +setIdMedia(int): self    -id: int

  }    -name: string

      -email: string

  class Contacts {    -subject: string

    -id: int    -message: text

    -name: string    -createdAt: DateTimeImmutable

    -email: string    -status: boolean

    -subject: string    --

    -message: string    +getId(): ?int

    -createdAt: DateTimeImmutable    +getName(): ?string

    -status: bool    +setName(string): self

    --    +getEmail(): ?string

    +getId(): ?int    +setEmail(string): self

    +getName(): ?string    +getSubject(): ?string

    +setName(string): self    +setSubject(string): self

    +getEmail(): ?string    +getMessage(): ?string

    +setEmail(string): self    +setMessage(string): self

    +getSubject(): ?string    +getCreatedAt(): ?DateTimeImmutable

    +setSubject(string): self    +setCreatedAt(DateTimeImmutable): self

    +getMessage(): ?string    +isStatus(): ?boolean

    +setMessage(string): self    +setStatus(boolean): self

    +getCreatedAt(): ?DateTimeImmutable}

    +setCreatedAt(DateTimeImmutable): self

    +isStatus(): ?bool' Contrôleurs

    +setStatus(bool): selfclass AuthController {

  }    -entityManager: EntityManagerInterface

}    --

    +__construct(EntityManagerInterface)

' === PACKAGE CONTRÔLEURS ===    +index(): JsonResponse

package "Contrôleurs (Symfony)" {    +register(Request, ValidatorInterface): JsonResponse

      +login(Request, JWTTokenManagerInterface): JsonResponse

  abstract class AbstractController {    +protected(): JsonResponse

    +json(data): JsonResponse}

  }

  class MediaController {

  class AuthController {    -entityManager: EntityManagerInterface

    -entityManager: EntityManagerInterface    --

    --    +__construct(EntityManagerInterface)

    +index(): JsonResponse    +index(): JsonResponse

    +register(Request, ValidatorInterface): JsonResponse    +show(int): JsonResponse

    +login(Request, JWTTokenManagerInterface): JsonResponse}

    +protected(): JsonResponse

  }class AdminController {

      -entityManager: EntityManagerInterface

  class MediaController {    --

    -entityManager: EntityManagerInterface    +__construct(EntityManagerInterface)

    --    -isAuthorized(Request): boolean

    +index(): JsonResponse    +index(): JsonResponse

    +show(int): JsonResponse    +dashboard(Request): JsonResponse

  }    +getMedias(Request): JsonResponse

      +createUser(Request): JsonResponse

  class ProfilController {    +createMedia(Request): JsonResponse

    -entityManager: EntityManagerInterface    +getUserr(int, Request): JsonResponse

    --    +getMedia(int, Request): JsonResponse

    +index(): JsonResponse    +deleteUser(int, Request): JsonResponse

    +getProfil(int, int, Request): JsonResponse    +deleteUseForEver(int, Request): JsonResponse

    +createProfilForUser(int, int, Request): JsonResponse    +reactivateUser(int, Request): JsonResponse

    +deleteProfilForUser(int, int, Request): JsonResponse    +deleteMedia(int, Request): JsonResponse

    +getAllProfilsForUser(int, Request): JsonResponse    +reactivateMedia(int, Request): JsonResponse

    +getProfilByUser(int, Request): JsonResponse    +updateUser(int, Request): JsonResponse

    +updateProfilByUser(int, Request): JsonResponse    +updateMedia(int, Request): JsonResponse

    +deleteProfilByUser(int, Request): JsonResponse    +getContact(int, Request): JsonResponse

  }    +contactLu(int, Request): JsonResponse

      +deleteContact(int, Request): JsonResponse

  class ContactController {}

    -entityManager: EntityManagerInterface

    --class ProfilController {

    +createContact(Request): JsonResponse    -entityManager: EntityManagerInterface

  }    --

      +__construct(EntityManagerInterface)

  class AdminController {    +index(): JsonResponse

    -entityManager: EntityManagerInterface    +getProfil(int, int, Request): JsonResponse

    --    +createProfilForUser(int, int, Request): JsonResponse

    -isAuthorized(Request): bool    +getProfilForUser(int, Request): JsonResponse

    +index(): JsonResponse    +deleteProfilForUser(int, Request): JsonResponse

    +dashboard(Request): JsonResponse    +getUserForProfil(int, Request): JsonResponse

    +getMedias(Request): JsonResponse    +deleteProfilByUser(int, Request): JsonResponse

    +getProfils(Request): JsonResponse}

    +createUser(Request): JsonResponse

    +createMedia(Request): JsonResponseclass ContactController {

    +deleteUser(int, Request): JsonResponse    -entityManager: EntityManagerInterface

    +deleteUseForEver(int, Request): JsonResponse    --

    +reactivateUser(int, Request): JsonResponse    +__construct(EntityManagerInterface)

    +deleteMedia(int, Request): JsonResponse    +createContact(Request): JsonResponse

    +reactivateMedia(int, Request): JsonResponse}

    +updateUser(int, Request): JsonResponse

    +updateMedia(int, Request): JsonResponse' Repositories

    +getContact(int, Request): JsonResponseclass UsersRepository {

    +contactLu(int, Request): JsonResponse    --

    +deleteContact(int, Request): JsonResponse    +findOneBy(array): ?Users

  }    +findAll(): array

}    +find(mixed): ?Users

}

' === PACKAGE REPOSITORIES ===

package "Repositories (Doctrine)" {
    class MediasRepository {
        --

  abstract class ServiceEntityRepository {    +findOneBy(array): ?Medias

    +find(id): ?object    +findAll(): array

    +findAll(): array    +find(mixed): ?Medias

    +findBy(criteria): array}

    +findOneBy(criteria): ?object

  }class ProfilsRepository {

      --

  class UsersRepository {    +findBy(array): array

    +__construct(ManagerRegistry)    +findOneBy(array): ?Profils

  }    +find(mixed): ?Profils

  }

  class MediasRepository {

    +__construct(ManagerRegistry)class ContactsRepository {

  }    --

      +findAll(): array

  class ProfilsRepository {    +find(mixed): ?Contacts

    +__construct(ManagerRegistry)}

  }

  ' Relations entre entités

  class ContactsRepository {Users ||--o{ Profils : "1..*"

    +__construct(ManagerRegistry)Medias ||--o{ Profils : "1..*"

  }

}' Relations contrôleur-repository

AuthController --> UsersRepository : uses

' === INTERFACES SYMFONY ===MediaController --> MediasRepository : uses

package "Interfaces Symfony Security" {AdminController --> UsersRepository : uses

  interface UserInterface {AdminController --> MediasRepository : uses

    +getRoles(): arrayAdminController --> ProfilsRepository : uses

    +getUserIdentifier(): stringAdminController --> ContactsRepository : uses

    +eraseCredentials(): voidProfilController --> UsersRepository : uses

  }ProfilController --> MediasRepository : uses

  ProfilController --> ProfilsRepository : uses

  interface PasswordAuthenticatedUserInterface {ContactController --> ContactsRepository : uses

    +getPassword(): ?string

  }' Relations repository-entity

}UsersRepository --> Users : manages

MediasRepository --> Medias : manages

' === PACKAGE COMMANDES ===ProfilsRepository --> Profils : manages

package "Commandes Console" {ContactsRepository --> Contacts : manages

  

  abstract class Command {' Interfaces Symfony

    +execute(InputInterface, OutputInterface): intinterface UserInterface

  }interface PasswordAuthenticatedUserInterface

  

  class CreateAdminCommand {Users ..|> UserInterface : implements

    -entityManager: EntityManagerInterfaceUsers ..|> PasswordAuthenticatedUserInterface : implements

    --

    +__construct(EntityManagerInterface)' Enumérations

    +execute(InputInterface, OutputInterface): intenum MediaType {

  }    FILM

}    SERIE

    MANGA

' === RELATIONS ENTITÉS ===}

Users ||--o{ Profils : "1..* favoris"

Medias ||--o{ Profils : "1..* utilisateurs"enum UserRole {

note on link : Table de liaison\nMany-to-Many    ROLE_USER

    ROLE_ADMIN

' === RELATIONS HÉRITAGE ===}

AuthController --|> AbstractController

MediaController --|> AbstractControllerMedias --> MediaType : type

ProfilController --|> AbstractControllerUsers --> UserRole : role

ContactController --|> AbstractController

AdminController --|> AbstractControllernote top of Users

  Entité principale pour la gestion

UsersRepository --|> ServiceEntityRepository  des utilisateurs avec authentification

MediasRepository --|> ServiceEntityRepository  JWT et système de rôles

ProfilsRepository --|> ServiceEntityRepositoryend note

ContactsRepository --|> ServiceEntityRepository

note top of Medias

CreateAdminCommand --|> Command  Stockage des informations sur tous

  les types de médias (films, séries, mangas)

Users ..|> UserInterface : implements  avec système de notation

Users ..|> PasswordAuthenticatedUserInterface : implementsend note



' === RELATIONS UTILISATION ===note top of Profils

AuthController ..> Users : uses  Table de liaison pour gérer les favoris

MediaController ..> Medias : uses  et watchlists des utilisateurs

ProfilController ..> Users : uses  (relation many-to-many)

ProfilController ..> Medias : usesend note

ProfilController ..> Profils : uses

ContactController ..> Contacts : usesnote bottom of AdminController

AdminController ..> Users : uses  Contrôleur sécurisé avec vérification

AdminController ..> Medias : uses  de tokens d'administration pour toutes

AdminController ..> Profils : uses  les opérations sensibles

AdminController ..> Contacts : usesend note

CreateAdminCommand ..> Users : creates

@enduml

' === NOTES ===
note right of Users : "Implémente l'authentification\nSymfony Security"
note right of Profils : "Table de liaison\nPour système de favoris"
note right of AdminController : "Double authentification\nToken + paramètres"

@enduml